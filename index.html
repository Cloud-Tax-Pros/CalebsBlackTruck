<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Caleb‚Äôs Black Truck | Book a Chauffeur</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" content="Caleb‚Äôs Black Truck ‚Äî Private Chauffeur Service in Atlanta.">

<!-- FAVICON -->
<link rel="icon" href="black truck.jpg">

<!-- GOOGLE FONTS -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Inter:wght@400;500&display=swap" rel="stylesheet">

<!-- GOOGLE MAPS (ONLY ONE SCRIPT) -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDSKvz-B8diZKPDchOQ_u0qJEqkSisEWjM&libraries=places"
  defer
></script>

<style>
body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: Inter, Arial, sans-serif;
}

.header {
  text-align: center;
  padding: 20px;
  border-bottom: 1px solid #333;
}

.header img {
  max-width: 180px;
}

h2 {
  font-family: "Playfair Display", serif;
}

.container {
  padding: 20px;
}

label {
  display: block;
  margin-top: 18px;
}

input, button {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  border-radius: 6px;
  border: none;
  margin-top: 8px;
}

input {
  background: #111;
  color: #fff;
  border: 1px solid #444;
}

button {
  background: #8b0000;
  color: #fff;
  font-weight: 600;
  cursor: pointer;
}

button:hover {
  background: #a00000;
}

/* PICKUP HELPER */
.pickup-wrapper {
  position: relative;
}

.helper-option {
  display: none;
  padding: 12px;
  background: #111;
  border: 1px solid #444;
  cursor: pointer;
  margin-top: 4px;
}

.helper-option:hover {
  background: #1a1a1a;
}

/* GOOGLE AUTOCOMPLETE */
.pac-container {
  z-index: 9999;
  background: #000;
  color: #fff;
  border: 1px solid #444;
}

#map {
  height: 260px;
  margin-top: 20px;
  border-radius: 10px;
}
</style>
</head>

<body>

<div class="header">
  <img src="CalebsBlackTruck.png" alt="Caleb‚Äôs Black Truck">
  <p>Private Chauffeur Service ‚Ä¢ Atlanta</p>
</div>

<div class="container">

  <h2>See Your Quote Before You Book</h2>

  <!-- PICKUP -->
  <label>Pickup Location</label>
  <div class="pickup-wrapper">
    <input id="pickup" placeholder="Enter Pickup Location" autocomplete="off">
    <div id="pickup-helper" class="helper-option" onclick="useCurrentLocation()">
      üìç <strong>Set As My Current Location</strong>
      <div id="currentAddress" style="font-size:12px;color:#aaa"></div>
    </div>
  </div>

  <!-- DROPOFF -->
  <label>Dropoff Location</label>
  <input id="dropoff" placeholder="Enter Dropoff Location" autocomplete="off">

  <button onclick="calculateRoute()">CONFIRM YOUR ROUTE</button>

  <div id="map"></div>
  <div id="fare" style="margin-top:20px;font-size:18px;"></div>

</div>

<script>
let pickupAutocomplete, dropoffAutocomplete;
let map, directionsService, directionsRenderer;

/* INIT AUTOCOMPLETE */
function initAutocomplete() {
  pickupAutocomplete = new google.maps.places.Autocomplete(
    document.getElementById("pickup"),
    { types: ["geocode", "establishment"], componentRestrictions: { country: "us" } }
  );

  dropoffAutocomplete = new google.maps.places.Autocomplete(
    document.getElementById("dropoff"),
    { types: ["geocode", "establishment"], componentRestrictions: { country: "us" } }
  );

  document.getElementById("pickup").addEventListener("focus", () => {
    document.getElementById("pickup-helper").style.display = "block";
  });

  pickupAutocomplete.addListener("place_changed", () => {
    document.getElementById("pickup-helper").style.display = "none";
  });
}

/* CURRENT LOCATION */
async function useCurrentLocation() {
  navigator.geolocation.getCurrentPosition(async (pos) => {
    const res = await fetch(
      `https://maps.googleapis.com/maps/api/geocode/json?latlng=${pos.coords.latitude},${pos.coords.longitude}&key=YOUR_API_KEY`
    );
    const data = await res.json();
    if (data.results.length) {
      document.getElementById("pickup").value = data.results[0].formatted_address;
      document.getElementById("currentAddress").innerText = data.results[0].formatted_address;
      document.getElementById("pickup-helper").style.display = "none";
    }
  });
}

/* ROUTE + FARE */
function calculateRoute() {
  const pickup = document.getElementById("pickup").value;
  const dropoff = document.getElementById("dropoff").value;

  if (!pickup || !dropoff) {
    alert("Enter pickup and dropoff locations");
    return;
  }

  directionsService = new google.maps.DirectionsService();
  directionsRenderer = new google.maps.DirectionsRenderer();

  map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 33.749, lng: -84.388 },
    zoom: 12
  });

  directionsRenderer.setMap(map);

  directionsService.route(
    { origin: pickup, destination: dropoff, travelMode: "DRIVING" },
    (result, status) => {
      if (status !== "OK") {
        alert("Unable to calculate route");
        return;
      }

      directionsRenderer.setDirections(result);
      const leg = result.routes[0].legs[0];

      const miles = leg.distance.value / 1609.34;
      const minutes = leg.duration.value / 60;

      const PER_MILE = 3.5;
      const PER_MINUTE = 0.75;
      const PEAK = new Date().getHours() >= 21 ? 1.25 : 1;

      const total = ((miles * PER_MILE) + (minutes * PER_MINUTE)) * PEAK;

      document.getElementById("fare").innerHTML = `
        <strong>Distance:</strong> ${miles.toFixed(1)} miles<br>
        <strong>Time:</strong> ${minutes.toFixed(0)} minutes<br>
        <strong>Estimated Fare:</strong> $${total.toFixed(2)}
      `;
    }
  );
}

/* WAIT FOR GOOGLE */
window.addEventListener("load", () => {
  const wait = setInterval(() => {
    if (window.google && google.maps && google.maps.places) {
      clearInterval(wait);
      initAutocomplete();
    }
  }, 100);
});
</script>

</body>
</html>



